<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:comp="http://java.sun.com/jsf/composite/comp"
	xmlns:ace="http://www.icefaces.org/icefaces/components">
<h:body>
	<!--<f:metadata>
		<f:event listener="#{programManagerModel.loadPrograms}"
			type="preRenderView"></f:event>
	</f:metadata>
	-->
	<ui:composition template="/PageTemplate.xhtml">
		<ui:param name="selectedMenu" value="CONFIGL"></ui:param>
		<ui:define name="pageTitle"></ui:define>
		<ui:define name="PageTitleIcon">
			<img src="images/icons/home.png" />
		</ui:define>
		<ui:define name="pageHeading">Location Manager</ui:define>
		<ui:define name="pageDescription">Select a row from the table below to view the details of each location.</ui:define>
		<ui:define name="pageContent">
			<ice:form id="formLocation">
				<ice:panelGrid columns="4" styleClass="borderBox" width="100%">
					<ice:panelGrid columns="5">
						<ice:outputText value="Search location(s) by" />
						<ice:selectOneRadio value="#{locationManagerModel.searchValue}"
							id="radioLocationSearch"
							style="border:none;margin-top:-13px;margin-bottom:-20px;margin-left:-15px;margin-right:-15px">
							<f:selectItem itemValue="name" itemLabel="Name" />
							<f:selectItem itemValue="code" itemLabel="Location Code" />
						</ice:selectOneRadio>
						<ice:inputText id="inputTextLocSearch"
							action="#{locationManagerModel.searchLocations}"
							value="#{locationManagerModel.searchText}">
							<f:validateLength maximum="20" />
						</ice:inputText>
						<ice:commandButton id="commanButtonLocMainSearch"
							action="#{locationManagerModel.searchLocations}" 
							value="#{msgs['search.label']}" styleClass="CommandButton" />
						<ice:commandButton id="commandLocatonAdd" value="Add New Location"
							styleClass="CommandButton"
							action="#{locationManagerModel.addNewLocation}" />
					</ice:panelGrid>
				</ice:panelGrid>
				<div class="bodyContainer">
					<ice:dataTable scrollable="true" scrollHeight="150px"
						value="#{locationManagerModel.locations}" var="loc"
						id="tableLocations"
						columnWidths="100px,175px,190px,140px,100px,110px,70px,120px,100px">
						<ice:column id="columnLocationId" style="text-align:center;width:100px">
							<ice:setEventPhase phase="INVOKE_APPLICATION" events="FacesEvent">
								<ice:rowSelector id="rowselectLocations"
									value="#{loc.ui_selected}"
									clickListener="#{locationManagerModel.selectLocation}">
									<f:attribute name="loc" value="#{loc}" />
								</ice:rowSelector>
							</ice:setEventPhase>
							<f:facet name="header">
								<ice:outputText value="Location Code" style="width:100px"/>
							</f:facet>
							<ice:outputText value="#{loc.locationCode}" style="width:100px"/>
						</ice:column>
						<ice:column id="columnLocationName" style="width:175px">
							<f:facet name="header">
								<ice:outputText value="Name" style="width:175px"/>
							</f:facet>
							<ice:outputText value="#{loc.name}" style="width:175px"/>
						</ice:column>
						<ice:column id="columnLocationAddress" style="width:190px">
							<f:facet name="header">
								<ice:outputText value="Street Address" style="width:190px"/>
							</f:facet>
							<ice:outputText value="#{loc.contact.streetAddress}" style="width:190px"/>
						</ice:column>
						<ice:column id="columnLocationCity"  style="width:140px">
							<f:facet name="header">
								<ice:outputText value="City"  style="width:140px" />
							</f:facet>
							<ice:outputText value="#{loc.contact.city}" style="width:140px"/>
						</ice:column>
						<ice:column id="columnLocationState" style="text-align:center;width:100px">
							<f:facet name="header">
								<ice:outputText value="State" style="width:100px"/>
							</f:facet>
							<ice:outputText value="#{loc.contact.state}" style="width:100px"/>
						</ice:column>
						<ice:column id="columnLocationPostCode" style="text-align:center;width:110px">
							<f:facet name="header">
								<ice:outputText value="Post Code"  style="width:110px"/>
							</f:facet>
							<ice:outputText value="#{loc.contact.postCode}" style="width:110px"/>
						</ice:column>
						<ice:column id="columnLocationGeoCode" style="text-align:center;width:70px">
							<f:facet name="header">
								<ice:outputText value="Geo Code"  style="width:70px"/>
							</f:facet>
							<ice:outputText value="#{loc.contact.geoCode}"  style="width:70px"/>
						</ice:column>
						<ice:column id="columnLocationContacNo" style="text-align:center;width:120px">
							<f:facet name="header">
								<ice:outputText value="Contact Number"  style="width:120px"/>
							</f:facet>
							<ice:outputText value="#{loc.contact.contactNumber}" style="width:120px"/>
						</ice:column>
						<!--Add criminal check column  -->
					<ice:column id="columnLocationCriminalCheck" style="text-align:center;width:100px">
							<f:facet name="header">
								<ice:outputText value="CriminalCheck" style="width:100px"/>
							</f:facet>
							<ice:outputText value="Yes" rendered="#{loc.criminalCheck==true}" style="width:100px"/>
							<ice:outputText value="No" rendered="#{loc.criminalCheck==false}" style="width:100px"/>
						</ice:column> 
					</ice:dataTable>

					<ice:panelTabSet id="tabSetLocationDetails" style="margin-top:10px">
						<ice:panelTab id="tabLocationProfile" label="Location Profile">
							<fieldset style="width: 660px; height: 250px">
								<legend>
									<ice:outputLabel value="Location Details" />
								</legend>
								<ice:panelGroup style="margin-top:10px"
									rendered="#{locationManagerModel.location == null}">
									<ice:outputText
										value="Please select a location to view details.." />
								</ice:panelGroup>
								<ice:panelGrid columns="4" width="700"
									rendered="#{locationManagerModel.location != null}">
									<ice:outputText value="Location Name" />
									<ice:inputText id="input_locName" tabindex="1"
										maxlength="#{msgs['location.name.size']}"
										value="#{locationManagerModel.location.name}" />
									<ice:outputText value="Street Address" />
									<ice:inputText id="input_locStreet" tabindex="6"
										maxlength="#{msgs['contact.streetAddress.size']}"
										value="#{locationManagerModel.location.contact.streetAddress}" />
									<ice:outputText value="Location Code" />
									<ice:inputText id="input_locCode" tabindex="2"
										maxlength="#{msgs['location.code.size']}"
										value="#{locationManagerModel.location.locationCode}" />
									<ice:outputText value="City" />
									<ice:inputText id="input_locCity" tabindex="7"
										maxlength="#{msgs['contact.city.size']}"
										value="#{locationManagerModel.location.contact.city}" />
									<ice:outputText value="Contact Number 1" />
									<ice:inputText id="input_locOffcNmbr"
										maxlength="#{msgs['contact.phone.size']}" tabindex="3"
										value="#{locationManagerModel.location.contact.officePhone}" />
									<ice:outputText value="State" />
									<ice:selectOneMenu id="select_locState" tabindex="8"
										value="#{locationManagerModel.location.contact.state}">
										<f:selectItems value="#{lookupListProvider.states}" />
									</ice:selectOneMenu>
									<ice:outputText value="Contact Number 2" />
									<ice:inputText id="input_locHomeNmbr" tabindex="4"
										maxlength="#{msgs['contact.phone.size']}"
										value="#{locationManagerModel.location.contact.homePhone}" />
									<ice:outputText value="Post Code" />
									<ice:inputText id="input_locPostCode" tabindex="9"
										maxlength="#{msgs['contact.postCode.size']}"
										value="#{locationManagerModel.location.contact.postCode}" />
									<ice:outputText value="Email" />
									<ice:inputText id="input_locEmail" tabindex="5"
										maxlength="#{msgs['contact.email.size']}"
										value="#{locationManagerModel.location.contact.email}" />
									<ice:outputText value="Geo Code" />
									<ice:inputText id="input_locGeoCode" tabindex="10"
										maxlength="#{msgs['contact.geoCode.size']}"
										value="#{locationManagerModel.location.contact.geoCode}" />
								<ice:outputText value="Criminal Check" />	
										<ice:selectBooleanCheckbox id="selectCriminalCheck"	value="#{locationManagerModel.location.criminalCheck}" /> 
								</ice:panelGrid>
								<ice:panelGroup
									rendered="#{locationManagerModel.location != null}"
									style="margin-top:20px;float:right; margin-right:18px">
									<ice:commandButton id="commandLocationDelete" tabindex="12"
										value="Delete" style="margin-right:5px; width:80px"
										rendered="#{locationManagerModel.location.id != null}"
										styleClass="CommandButton"
										panelConfirmation="deleteConfirmation"
										action="#{locationManagerModel.deleteLocation}" />
									<ice:commandButton id="commandLocationSave" tabindex="11"
										styleClass="CommandButton" value="Save" style="width:80px"
										action="#{locationManagerModel.saveLocation}" />
								</ice:panelGroup>
							</fieldset>
						</ice:panelTab>

						<ice:panelConfirmation id="deleteConfirmation" acceptLabel="Yes"
							cancelLabel="No" draggable="true" title="Confirm"
							message="Are you sure you want to perform this action?" />

					</ice:panelTabSet>
				</div>
			</ice:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>